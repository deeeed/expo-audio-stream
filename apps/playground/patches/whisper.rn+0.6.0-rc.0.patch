diff --git a/ios/RNWhisperContext.mm b/ios/RNWhisperContext.mm
index 1234567..abcdefg 100644
--- a/ios/RNWhisperContext.mm
+++ b/ios/RNWhisperContext.mm
@@ -463,18 +463,21 @@
                 void (^onNewSegments)(NSDictionary *) = (void (^)(NSDictionary *))data->onNewSegments;
                 onNewSegments(result);
             };
-            struct rnwhisper_segments_callback_data user_data = {
-                .onNewSegments = onNewSegments,
-                .tdrzEnable = options[@"tdrzEnable"] && [options[@"tdrzEnable"] boolValue],
-                .total_n_new = 0,
-            };
-            params.new_segment_callback_user_data = &user_data;
+            struct rnwhisper_segments_callback_data *user_data = new rnwhisper_segments_callback_data();
+            user_data->onNewSegments = [onNewSegments copy];
+            user_data->tdrzEnable = options[@"tdrzEnable"] && [options[@"tdrzEnable"] boolValue];
+            user_data->total_n_new = 0;
+            params.new_segment_callback_user_data = user_data;
         }

         rnwhisper::job* job = rnwhisper::job_new(jobId, params);
         job->n_processors = options[@"nProcessors"] != nil ? [options[@"nProcessors"] intValue] : 1;
         self->recordState.job = job;
         int code = [self fullTranscribe:job audioData:audioData audioDataCount:audioDataCount];
+        if (params.new_segment_callback_user_data) {
+            delete (struct rnwhisper_segments_callback_data *)params.new_segment_callback_user_data;
+            params.new_segment_callback_user_data = nullptr;
+        }
         rnwhisper::job_remove(jobId);
         self->recordState.job = nullptr;
         self->recordState.isTranscribing = false;
