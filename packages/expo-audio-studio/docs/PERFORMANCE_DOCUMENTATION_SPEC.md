# Performance Documentation Specification - File Size Analysis

## Goal
Create a simple performance documentation page showing file sizes generated by different recording configurations for the same audio duration (60 seconds).

## Implementation Using Existing System

### 1. Use Existing Agent Validation
No new perfTest system needed. Use existing deep links with different recording parameters:

```bash
# Example configurations for 60-second recordings
audioplayground://agent-validation?sampleRate=16000&channels=1&encoding=pcm_8bit
audioplayground://agent-validation?sampleRate=16000&channels=1&encoding=pcm_16bit
audioplayground://agent-validation?sampleRate=44100&channels=2&encoding=pcm_16bit
audioplayground://agent-validation?sampleRate=48000&channels=2&encoding=pcm_32bit
```

### 2. Test Configurations

Simple matrix focusing on file size impact:

| Config Name | Sample Rate | Channels | Bit Depth | Compression | File Size (TBD) |
|------------|-------------|----------|-----------|-------------|-----------------|
| Voice Low | 16kHz | Mono | 8-bit | None | TBD |
| Voice Standard | 16kHz | Mono | 16-bit | None | TBD |
| Voice Compressed | 16kHz | Mono | 16-bit | Opus 32k | TBD |
| Audio Book | 44.1kHz | Mono | 16-bit | None | TBD |
| Music Standard | 44.1kHz | Stereo | 16-bit | None | TBD |
| Music Compressed | 44.1kHz | Stereo | 16-bit | AAC 128k | TBD |
| Professional | 48kHz | Stereo | 32-bit | None | TBD |

### 3. E2E Test Extension

Extend existing `stop-recording-performance.test.ts` to collect file sizes:

```typescript
// Add to existing test
const configurations = [
  { name: 'Voice Low', sampleRate: 16000, channels: 1, encoding: 'pcm_8bit' },
  { name: 'Voice Standard', sampleRate: 16000, channels: 1, encoding: 'pcm_16bit' },
  // ... etc
];

configurations.forEach(config => {
  it(`should record 60s with ${config.name} configuration`, async () => {
    // Use existing deep link approach
    await device.openURL({
      url: `audioplayground://agent-validation?sampleRate=${config.sampleRate}&channels=${config.channels}&encoding=${config.encoding}`
    });
    
    // Record for 60 seconds
    await runPerformanceTest(60);
    
    // Extract file size from existing result
    // Log for documentation: "Voice Low: 0.9 MB"
  });
});
```

### 4. Documentation Page

Create a simple documentation page at `documentation_site/docs/performance/file-sizes.md`:

```markdown
# Recording File Sizes

This table will show actual file sizes for 60-second recordings with different configurations:

| Configuration | Sample Rate | Channels | Bit Depth | File Size (60s) | Use Case |
|--------------|-------------|----------|-----------|-----------------|----------|
| Voice Low | 16 kHz | Mono | 8-bit | [TBD] | Voice memos |
| Voice Standard | 16 kHz | Mono | 16-bit | [TBD] | Podcasts |
| Voice Compressed | 16 kHz | Mono | 16-bit + Opus | [TBD] | Long recordings |
| Audio Book | 44.1 kHz | Mono | 16-bit | [TBD] | Audio books, lectures |
| Music Standard | 44.1 kHz | Stereo | 16-bit | [TBD] | Music recording |
| Music Compressed | 44.1 kHz | Stereo | 16-bit + AAC | [TBD] | Music sharing |
| Professional | 48 kHz | Stereo | 32-bit | [TBD] | Studio quality |

*Values will be populated from actual E2E test results*

## File Size Formula

For uncompressed WAV files:
```
File Size (MB) = Duration (s) × Sample Rate × Channels × (Bit Depth / 8) / 1,048,576
```

## Performance Insights

- **Compression Savings**: [TBD - will be calculated from actual results]
- **Platform Consistency**: [TBD - will compare iOS vs Android results]
```

### 5. Automation Script

Simple script to run tests and update documentation:

```bash
#!/bin/bash
# scripts/collect-file-sizes.sh

echo "Collecting file sizes for documentation..."

# Run E2E tests that collect file sizes
cd apps/playground
yarn e2e:android:file-sizes

# Extract results from logs
grep "File Size:" logs/agent-validation/*.log > ../../file-sizes.txt

echo "Results collected. Update documentation_site/docs/performance/file-sizes.md"
```

## Summary

This simplified approach:
- Uses existing agent validation system (no new code)
- Focuses solely on file size comparison table
- Minimal changes to existing tests
- Provides clear, useful information for users choosing settings
- Can be automated with existing infrastructure