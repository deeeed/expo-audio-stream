(self.webpackChunk_siteed_expo_audio_ui=self.webpackChunk_siteed_expo_audio_ui||[]).push([[217,879],{"./src/AudioVisualizer/AudioVisualizer.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioVisualizer=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__("./node_modules/@babel/runtime/helpers/slicedToArray.js")),_react=function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;var o,i,f={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return f;if(o=t?n:r){if(o.has(e))return o.get(e);o.set(e,f)}for(var _t in e)"default"!==_t&&{}.hasOwnProperty.call(e,_t)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,_t))&&(i.get||i.set)?o(f,_t,i):f[_t]=e[_t]);return f}(e,t)}(__webpack_require__("./node_modules/react/index.js")),_View=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/View/index.js")),_reactNativeReanimated=__webpack_require__("./node_modules/react-native-reanimated/lib/module/index.js"),_AudioVisualizers=__webpack_require__("./src/AudioVisualizer/AudioVisualizers.helpers.tsx"),_CanvasContainer=_interopRequireDefault(__webpack_require__("./src/AudioVisualizer/CanvasContainer.tsx")),_GestureHandler=__webpack_require__("./src/AudioVisualizer/GestureHandler.tsx"),_NavigationControls=_interopRequireDefault(__webpack_require__("./src/NavigationControls/NavigationControls.tsx")),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");var initialState={ready:!1,triggerUpdate:0,canvasWidth:0,currentTime:void 0,hasInitialized:!1,selectedCandle:null,selectedIndex:-1},reducer=function reducer(state,action){return"UPDATE_STATE"===action.type?Object.assign({},state,action.state):state};(exports.AudioVisualizer=function AudioVisualizer(_ref){var audioData=_ref.audioData,_ref$canvasHeight=_ref.canvasHeight,canvasHeight=void 0===_ref$canvasHeight?100:_ref$canvasHeight,_ref$candleWidth=_ref.candleWidth,candleWidth=void 0===_ref$candleWidth?3:_ref$candleWidth,fullCurrentTime=_ref.currentTime,_ref$candleSpace=_ref.candleSpace,candleSpace=void 0===_ref$candleSpace?2:_ref$candleSpace,_ref$playing=_ref.playing,playing=void 0!==_ref$playing&&_ref$playing,_ref$mode=_ref.mode,mode=void 0===_ref$mode?"static":_ref$mode,_ref$showRuler=_ref.showRuler,showRuler=void 0!==_ref$showRuler&&_ref$showRuler,_ref$showNavigation=_ref.showNavigation,showNavigation=void 0===_ref$showNavigation||_ref$showNavigation,_ref$showDottedLine=_ref.showDottedLine,showDottedLine=void 0===_ref$showDottedLine||_ref$showDottedLine,_ref$showSilence=_ref.showSilence,showSilence=void 0!==_ref$showSilence&&_ref$showSilence,_ref$showYAxis=_ref.showYAxis,showYAxis=void 0!==_ref$showYAxis&&_ref$showYAxis,_ref$showSelectedCand=_ref.showSelectedCandle,showSelectedCandle=void 0===_ref$showSelectedCand||_ref$showSelectedCand,_ref$showReferenceLin=_ref.showReferenceLine,showReferenceLine=void 0===_ref$showReferenceLin||_ref$showReferenceLin,logger=_ref.logger,onSeekEnd=_ref.onSeekEnd,onSelection=_ref.onSelection,font=_ref.font,_ref$_visualizationTy=_ref._visualizationType,_visualizationType=void 0===_ref$_visualizationTy?"candles":_ref$_visualizationTy,customTheme=_ref.theme,CustomNavigationControls=_ref.NavigationControls,_ref$disableTapSelect=_ref.disableTapSelection,disableTapSelection=void 0!==_ref$disableTapSelect&&_ref$disableTapSelect,_ref$enableInertia=_ref.enableInertia,enableInertia=void 0!==_ref$enableInertia&&_ref$enableInertia,translateXPosition=_ref.translateXPosition,onTranslateXChange=_ref.onTranslateXChange,_ref$scaleToHumanVoic=_ref.scaleToHumanVoice,scaleToHumanVoice=void 0!==_ref$scaleToHumanVoic&&_ref$scaleToHumanVoic,_ref$amplitudeScaling=_ref.amplitudeScaling,amplitudeScaling=void 0===_ref$amplitudeScaling?"normalized":_ref$amplitudeScaling,showDecibelVisualization=_ref.showDecibelVisualization,resetTrigger=_ref.resetTrigger,testID=_ref.testID,translateX=(0,_reactNativeReanimated.useSharedValue)(0),_useReducer=(0,_react.useReducer)(reducer,initialState),_useReducer2=(0,_slicedToArray2.default)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1],_useState=(0,_react.useState)(_visualizationType),_useState2=(0,_slicedToArray2.default)(_useState,2),activeVisualizationType=_useState2[0],ready=(_useState2[1],state.ready),triggerUpdate=state.triggerUpdate,canvasWidth=state.canvasWidth,currentTime=state.currentTime,hasInitialized=state.hasInitialized,selectedCandle=state.selectedCandle,selectedIndex=state.selectedIndex,handleLayout=(0,_react.useCallback)((function(event){var width=event.nativeEvent.layout.width;null==logger||logger.log(`Layout width: ${width}`),dispatch({type:"UPDATE_STATE",state:{canvasWidth:width}})}),[]),referenceLineX=(0,_AudioVisualizers.calculateReferenceLinePosition)({canvasWidth,referenceLinePosition:"live"===mode?"RIGHT":"MIDDLE"}),maxDisplayedItems=Math.ceil(canvasWidth/(candleWidth+candleSpace)),maxTranslateX=audioData.dataPoints.length*(candleWidth+candleSpace),paddingLeft=canvasWidth/2,totalCandleWidth=audioData.dataPoints.length*(candleWidth+candleSpace),updateActivePointsResult=(0,_react.useRef)({activePoints:[],range:{start:0,end:0,startVisibleIndex:0,endVisibleIndex:0},lastUpdatedTranslateX:0}),theme=(0,_react.useMemo)((function(){var defaultTheme=(0,_AudioVisualizers.createDefaultTheme)(canvasWidth,referenceLineX);return Object.assign({},defaultTheme,customTheme,{container:Object.assign({},defaultTheme.container,(null==customTheme?void 0:customTheme.container)||{})})}),[canvasWidth,referenceLineX,customTheme]),NavigationControlsComponent=CustomNavigationControls||_NavigationControls.default;(0,_react.useEffect)((function(){if(0!==maxDisplayedItems&&!hasInitialized){if("live"!==mode){var initialActivePoints=new Array(3*maxDisplayedItems).fill({id:-1,amplitude:0,visible:!1});updateActivePointsResult.current=Object.assign({},updateActivePointsResult.current,{activePoints:initialActivePoints})}dispatch({type:"UPDATE_STATE",state:{hasInitialized:!0,ready:!0}})}}),[maxDisplayedItems,mode,hasInitialized]),(0,_react.useEffect)((function(){if(hasInitialized){var _updateActivePoints=(0,_AudioVisualizers.updateActivePoints)({x:translateX.value,context:{dataPoints:audioData.dataPoints,maxDisplayedItems,activePoints:updateActivePointsResult.current.activePoints,range:updateActivePointsResult.current.range,referenceLineX,mode,candleWidth,candleSpace}}),updatedActivePoints=_updateActivePoints.activePoints,updatedRange=_updateActivePoints.range,updatedLastUpdatedTranslateX=_updateActivePoints.lastUpdatedTranslateX;null==logger||logger.log(`Updated active points: ${updatedActivePoints.length}`),updateActivePointsResult.current={activePoints:updatedActivePoints,range:updatedRange,lastUpdatedTranslateX:updatedLastUpdatedTranslateX},dispatch({type:"UPDATE_STATE",state:{triggerUpdate:triggerUpdate+1,selectedCandle:null,selectedIndex:-1}})}}),[audioData.dataPoints,dispatch,hasInitialized,maxDisplayedItems,canvasWidth]),(0,_react.useEffect)((function(){fullCurrentTime&&dispatch({type:"UPDATE_STATE",state:{currentTime:fullCurrentTime}})}),[fullCurrentTime]),(0,_react.useEffect)((function(){if(currentTime&&audioData.durationMs){null==logger||logger.log(`Syncing translateX... currentTime=${currentTime}`);var newTranslateX=(0,_AudioVisualizers.syncTranslateX)({currentTime,durationMs:audioData.durationMs,maxTranslateX,minTranslateX:0,translateX}),movedDistance=Math.abs(newTranslateX-updateActivePointsResult.current.lastUpdatedTranslateX),translateXThreshold=canvasWidth;if(null==logger||logger.log(`Moved distance: ${movedDistance} newTranslateX: ${newTranslateX} Threshold: ${translateXThreshold}`),movedDistance>=translateXThreshold){var _updateActivePoints2=(0,_AudioVisualizers.updateActivePoints)({x:newTranslateX,context:{dataPoints:audioData.dataPoints,maxDisplayedItems,activePoints:updateActivePointsResult.current.activePoints,referenceLineX,mode,range:updateActivePointsResult.current.range,candleWidth,candleSpace}}),updatedActivePoints=_updateActivePoints2.activePoints,updatedRange=_updateActivePoints2.range,updatedLastUpdatedTranslateX=_updateActivePoints2.lastUpdatedTranslateX;updateActivePointsResult.current={activePoints:updatedActivePoints,range:updatedRange,lastUpdatedTranslateX:updatedLastUpdatedTranslateX},dispatch({type:"UPDATE_STATE",state:{triggerUpdate:triggerUpdate+1}})}}}),[playing,currentTime,audioData.durationMs,canvasWidth,translateX]);var handleDragEnd=(0,_react.useCallback)((function(_ref2){var newTranslateX=_ref2.newTranslateX;if(null==logger||logger.log(`handleDragEnd newTranslateX=${newTranslateX} disableTapSelection=${disableTapSelection}`),audioData.durationMs&&onSeekEnd){var newTime=-newTranslateX/maxTranslateX*audioData.durationMs/1e3;onSeekEnd(newTime)}null==onTranslateXChange||onTranslateXChange(newTranslateX);var _updateActivePoints3=(0,_AudioVisualizers.updateActivePoints)({x:newTranslateX,context:{dataPoints:audioData.dataPoints,maxDisplayedItems,activePoints:updateActivePointsResult.current.activePoints,referenceLineX,mode,range:updateActivePointsResult.current.range,candleWidth,candleSpace}}),updatedActivePoints=_updateActivePoints3.activePoints,updatedRange=_updateActivePoints3.range,updatedLastUpdatedTranslateX=_updateActivePoints3.lastUpdatedTranslateX;updateActivePointsResult.current={activePoints:updatedActivePoints,range:updatedRange,lastUpdatedTranslateX:updatedLastUpdatedTranslateX},dispatch({type:"UPDATE_STATE",state:{triggerUpdate:triggerUpdate+1}})}),[onSeekEnd,audioData.dataPoints,maxDisplayedItems,onTranslateXChange]),handleSelectionChange=(0,_react.useCallback)((function(candle){var currentIndex=audioData.dataPoints.findIndex((function(point){return point.id===candle.id}));dispatch({type:"UPDATE_STATE",state:{selectedCandle:Object.assign({},candle,{visible:!0}),selectedIndex:currentIndex}}),null==onSelection||onSelection({dataPoint:candle,index:currentIndex})}),[onSelection,dispatch]),handlePrevNextSelection=(0,_react.useCallback)((function(direction){if(null==logger||logger.debug(`[${direction}] Selected index: ${selectedIndex}`,selectedCandle),selectedCandle&&-1!==selectedIndex){var newIndex="prev"===direction?selectedIndex-1:selectedIndex+1;if(null==logger||logger.debug(`New index: ${newIndex}`),!(newIndex<0||newIndex>=audioData.dataPoints.length)){var newSelectedCandle=audioData.dataPoints[newIndex];newSelectedCandle&&(dispatch({type:"UPDATE_STATE",state:{selectedCandle:Object.assign({},newSelectedCandle,{visible:!0}),selectedIndex:newIndex}}),null==logger||logger.debug(`New selected candle: ${newSelectedCandle.id}`,onSelection),null==onSelection||onSelection({dataPoint:newSelectedCandle,index:newIndex}))}}}),[audioData.dataPoints,selectedIndex,selectedCandle,onSelection,dispatch]),handleReset=(0,_react.useCallback)((function(){translateX.value=0;var _updateActivePoints4=(0,_AudioVisualizers.updateActivePoints)({x:translateX.value,context:{dataPoints:audioData.dataPoints,maxDisplayedItems,activePoints:updateActivePointsResult.current.activePoints,range:updateActivePointsResult.current.range,referenceLineX,mode,candleWidth,candleSpace}}),updatedActivePoints=_updateActivePoints4.activePoints,updatedRange=_updateActivePoints4.range,updatedLastUpdatedTranslateX=_updateActivePoints4.lastUpdatedTranslateX;null==logger||logger.log(`Updated active points: ${updatedActivePoints.length}`),updateActivePointsResult.current={activePoints:updatedActivePoints,range:updatedRange,lastUpdatedTranslateX:updatedLastUpdatedTranslateX};var newSelectedDataPoint=audioData.dataPoints[0];newSelectedDataPoint&&dispatch({type:"UPDATE_STATE",state:{selectedCandle:Object.assign({},newSelectedDataPoint,{visible:!0}),selectedIndex:0,triggerUpdate:Date.now()}})}),[dispatch]),handleCenter=(0,_react.useCallback)((function(){var currentTranslateX=translateX.value,candleUnderReferenceLine=Math.floor((referenceLineX-currentTranslateX)/(candleWidth+candleSpace))-Math.floor(maxDisplayedItems/2)+1;if(candleUnderReferenceLine>=0&&candleUnderReferenceLine<audioData.dataPoints.length){var newSelectedCandle=audioData.dataPoints[candleUnderReferenceLine];newSelectedCandle?(dispatch({type:"UPDATE_STATE",state:{selectedCandle:Object.assign({},newSelectedCandle,{visible:!0}),selectedIndex:candleUnderReferenceLine}}),null==onSelection||onSelection({dataPoint:newSelectedCandle,index:candleUnderReferenceLine})):null==logger||logger.debug("No candle found at index:",candleUnderReferenceLine)}else null==logger||logger.log("Candle index out of range:",candleUnderReferenceLine)}),[translateX,referenceLineX,audioData.dataPoints,candleWidth,candleSpace,maxDisplayedItems,canvasWidth,dispatch,onSelection]);(0,_react.useEffect)((function(){void 0!==translateXPosition&&translateX.value!==translateXPosition&&(translateX.value=translateXPosition)}),[translateXPosition]);var mergedTheme=(0,_react.useMemo)((function(){var _showDecibelVisualiza;return Object.assign({},theme,{decibelVisualization:showDecibelVisualization?{type:showDecibelVisualization.type,position:showDecibelVisualization.position,orientation:showDecibelVisualization.orientation,offset:showDecibelVisualization.offset,dimensions:showDecibelVisualization.dimensions,theme:null!=(_showDecibelVisualiza=showDecibelVisualization.theme)?_showDecibelVisualiza:{}}:void 0})}),[theme,showDecibelVisualization]);return(0,_react.useEffect)((function(){void 0!==resetTrigger&&handleReset()}),[resetTrigger,handleReset]),(0,_react.useEffect)((function(){return function(){(0,_reactNativeReanimated.cancelAnimation)(translateX)}}),[]),(0,_jsxRuntime.jsxs)(_View.default,{style:mergedTheme.container,onLayout:handleLayout,testID:testID?`${testID}-container`:void 0,children:["live"!==mode&&showNavigation&&(0,_jsxRuntime.jsx)(NavigationControlsComponent,{selectedCandle,selectedIndex,audioData,currentTime,theme:mergedTheme,onPrev:function onPrev(){return handlePrevNextSelection("prev")},onNext:function onNext(){return handlePrevNextSelection("next")},onReset:handleReset,onCenter:handleCenter}),(0,_jsxRuntime.jsx)(_GestureHandler.GestureHandler,{playing,mode,translateX,maxTranslateX,canvasWidth,candleWidth,candleSpace,disableTapSelection,totalCandleWidth,activePoints:updateActivePointsResult.current.activePoints,onDragEnd:handleDragEnd,onSelection:handleSelectionChange,enableInertia,children:(0,_jsxRuntime.jsx)(_View.default,{children:ready&&(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)(_CanvasContainer.default,{canvasHeight,candleWidth,candleSpace,showDottedLine,showYAxis,showRuler,showSilence,showSelectedCandle,mode,visualizationType:activeVisualizationType,font,disableTapSelection,startIndex:updateActivePointsResult.current.range.start,translateX,activePoints:updateActivePointsResult.current.activePoints,maxDisplayedItems,paddingLeft,totalCandleWidth,canvasWidth,selectedCandle,onSelection:handleSelectionChange,durationMs:audioData.durationMs,minAmplitude:audioData.amplitudeRange.min,maxAmplitude:audioData.amplitudeRange.max,theme:mergedTheme,scaleToHumanVoice,amplitudeScaling,currentAmplitude:function getCurrentAmplitude(){var _updateActivePointsRe,_updateActivePointsRe2;if(!updateActivePointsResult.current.activePoints.length)return 0;var referenceIndex="live"===mode?updateActivePointsResult.current.activePoints.length-1:Math.floor(updateActivePointsResult.current.activePoints.length/2);return null!=(_updateActivePointsRe=null==(_updateActivePointsRe2=updateActivePointsResult.current.activePoints[referenceIndex])?void 0:_updateActivePointsRe2.amplitude)?_updateActivePointsRe:0}(),testID:testID?`${testID}-canvas`:void 0}),showReferenceLine&&(0,_jsxRuntime.jsx)(_View.default,{style:mergedTheme.referenceLine})]})})})]})}).__docgenInfo={description:"",methods:[],displayName:"AudioVisualizer",props:{audioData:{required:!0,tsType:{name:"AudioAnalysis"},description:""},currentTime:{required:!1,tsType:{name:"number"},description:""},canvasHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"100",computed:!1}},candleWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"3",computed:!1}},candleSpace:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}},showDottedLine:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showRuler:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showYAxis:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showSilence:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showNavigation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showSelectedCandle:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showReferenceLine:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},enableInertia:{required:!1,tsType:{name:"GestureHandlerProps['enableInertia']",raw:"GestureHandlerProps['enableInertia']"},description:"",defaultValue:{value:"false",computed:!1}},font:{required:!1,tsType:{name:"SkFont"},description:""},logger:{required:!1,tsType:{name:"ConsoleLike"},description:""},onSelection:{required:!1,tsType:{name:"signature",type:"function",raw:"({\n    dataPoint,\n    index,\n}: {\n    dataPoint: DataPoint\n    index: number\n}) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n    dataPoint: DataPoint\n    index: number\n}",signature:{properties:[{key:"dataPoint",value:{name:"DataPoint",required:!0}},{key:"index",value:{name:"number",required:!0}}]}},name:""}],return:{name:"void"}}},description:""},mode:{required:!1,tsType:{name:"union",raw:"'static' | 'live'",elements:[{name:"literal",value:"'static'"},{name:"literal",value:"'live'"}]},description:"",defaultValue:{value:"'static'",computed:!1}},_visualizationType:{required:!1,tsType:{name:"CanvasContainerProps['visualizationType']",raw:"CanvasContainerProps['visualizationType']"},description:"",defaultValue:{value:"'candles'",computed:!1}},playing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onSeekEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"(newTime: number) => void",signature:{arguments:[{type:{name:"number"},name:"newTime"}],return:{name:"void"}}},description:""},theme:{required:!1,tsType:{name:"Partial",elements:[{name:"AudioVisualizerTheme"}],raw:"Partial<AudioVisualizerTheme>"},description:""},NavigationControls:{required:!1,tsType:{name:"ReactComponentType",raw:"React.ComponentType<NavigationControlsProps>",elements:[{name:"NavigationControlsProps"}]},description:""},disableTapSelection:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},translateXPosition:{required:!1,tsType:{name:"number"},description:"Allows parent to set the translateX position"},onTranslateXChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(translateX: number) => void",signature:{arguments:[{type:{name:"number"},name:"translateX"}],return:{name:"void"}}},description:"Callback to notify parent of translateX changes"},scaleToHumanVoice:{required:!1,tsType:{name:"boolean"},description:"Whether to scale amplitudes to human voice range or use absolute values",defaultValue:{value:"false",computed:!1}},amplitudeScaling:{required:!1,tsType:{name:"union",raw:"'raw' | 'normalized' | 'humanVoice'",elements:[{name:"literal",value:"'raw'"},{name:"literal",value:"'normalized'"},{name:"literal",value:"'humanVoice'"}]},description:"How to scale the amplitude values",defaultValue:{value:"'normalized'",computed:!1}},showDecibelVisualization:{required:!1,tsType:{name:"DecibelVisualizationConfig"},description:""},resetTrigger:{required:!1,tsType:{name:"unknown"},description:""},testID:{required:!1,tsType:{name:"string"},description:""}}}},"./src/AudioVisualizer/GestureHandler.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.GestureHandler=void 0;_interopRequireDefault(__webpack_require__("./node_modules/react/index.js"));var _Platform=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/Platform/index.js")),_reactNativeGestureHandler=__webpack_require__("./node_modules/react-native-gesture-handler/lib/module/index.js"),_reactNativeReanimated=__webpack_require__("./node_modules/react-native-reanimated/lib/module/index.js"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_worklet_12527754380734_init_data={code:"function GestureHandlerTsx1(){const{isDecelerating,velocity,translateX,runOnJS,onDragEnd,maxTranslateX}=this.__closure;if(!isDecelerating.value)return;velocity.value*=0.85;const newTranslateX=translateX.value+velocity.value*0.016;if(Math.abs(velocity.value)<5){isDecelerating.value=false;runOnJS(onDragEnd)({newTranslateX:translateX.value});return;}translateX.value=Math.max(-maxTranslateX,Math.min(0,newTranslateX));}"},_worklet_11969384653096_init_data={code:"function GestureHandlerTsx2(){const{enableInertia,isDecelerating,runOnJS,onDragEnd,translateX}=this.__closure;if(enableInertia){isDecelerating.value=true;}else{runOnJS(onDragEnd)({newTranslateX:translateX.value});}}"},_worklet_8343887393993_init_data={code:"function GestureHandlerTsx3(e){const{translateX,maxTranslateX,velocity}=this.__closure;const newTranslateX=translateX.value+e.changeX;translateX.value=Math.max(-maxTranslateX,Math.min(0,newTranslateX));velocity.value=e.velocityX;}"},_worklet_17316000222609_init_data={code:"function GestureHandlerTsx4(){const{cancelAnimation,translateX,velocity,isDecelerating}=this.__closure;cancelAnimation(translateX);velocity.value=0;isDecelerating.value=false;}"},_worklet_17015786604123_init_data={code:"function GestureHandlerTsx5(event){const{disableTapSelection,onSelection,canvasWidth,translateX,totalCandleWidth,candleWidth,candleSpace,activePoints,runOnJS}=this.__closure;if(disableTapSelection||!onSelection){return;}const{x:x}=event;if(x<0||x>canvasWidth){return;}const plotStart=canvasWidth/2+translateX.value;const plotEnd=plotStart+totalCandleWidth;if(x<plotStart||x>plotEnd){return;}const adjustedX=x-plotStart;const index=Math.floor(adjustedX/(candleWidth+candleSpace));const candle=activePoints[index];if(!candle){return;}runOnJS(onSelection)(candle);}"};exports.GestureHandler=function GestureHandler(_ref){var playing=_ref.playing,mode=_ref.mode,translateX=_ref.translateX,maxTranslateX=_ref.maxTranslateX,canvasWidth=_ref.canvasWidth,candleSpace=_ref.candleSpace,candleWidth=_ref.candleWidth,totalCandleWidth=_ref.totalCandleWidth,activePoints=_ref.activePoints,onDragEnd=_ref.onDragEnd,onSelection=_ref.onSelection,children=_ref.children,_ref$enableInertia=_ref.enableInertia,enableInertia=void 0!==_ref$enableInertia&&_ref$enableInertia,_ref$disableTapSelect=_ref.disableTapSelection,disableTapSelection=void 0!==_ref$disableTapSelect&&_ref$disableTapSelect,velocity=(0,_reactNativeReanimated.useSharedValue)(0),isDecelerating=(0,_reactNativeReanimated.useSharedValue)(!1);if((0,_reactNativeReanimated.useFrameCallback)(function GestureHandlerTsx1Factory(_ref2){var _worklet_12527754380734_init_data=_ref2._worklet_12527754380734_init_data,isDecelerating=_ref2.isDecelerating,velocity=_ref2.velocity,translateX=_ref2.translateX,runOnJS=_ref2.runOnJS,onDragEnd=_ref2.onDragEnd,maxTranslateX=_ref2.maxTranslateX,GestureHandlerTsx1=function GestureHandlerTsx1(){if(isDecelerating.value){velocity.value*=.85;var newTranslateX=translateX.value+.016*velocity.value;if(Math.abs(velocity.value)<5)return isDecelerating.value=!1,void runOnJS(onDragEnd)({newTranslateX:translateX.value});translateX.value=Math.max(-maxTranslateX,Math.min(0,newTranslateX))}};return GestureHandlerTsx1.__closure={isDecelerating,velocity,translateX,runOnJS,onDragEnd,maxTranslateX},GestureHandlerTsx1.__workletHash=0xb64d85985be,GestureHandlerTsx1.__initData=_worklet_12527754380734_init_data,GestureHandlerTsx1}({_worklet_12527754380734_init_data,isDecelerating,velocity,translateX,runOnJS:_reactNativeReanimated.runOnJS,onDragEnd,maxTranslateX})),playing||"live"===mode)return(0,_jsxRuntime.jsx)(_jsxRuntime.Fragment,{children});var panGesture=_reactNativeGestureHandler.Gesture.Pan().onStart(function GestureHandlerTsx4Factory(_ref3){var _worklet_17316000222609_init_data=_ref3._worklet_17316000222609_init_data,cancelAnimation=_ref3.cancelAnimation,translateX=_ref3.translateX,velocity=_ref3.velocity,isDecelerating=_ref3.isDecelerating,GestureHandlerTsx4=function GestureHandlerTsx4(){cancelAnimation(translateX),velocity.value=0,isDecelerating.value=!1};return GestureHandlerTsx4.__closure={cancelAnimation,translateX,velocity,isDecelerating},GestureHandlerTsx4.__workletHash=0xfbfb20acd91,GestureHandlerTsx4.__initData=_worklet_17316000222609_init_data,GestureHandlerTsx4}({_worklet_17316000222609_init_data,cancelAnimation:_reactNativeReanimated.cancelAnimation,translateX,velocity,isDecelerating})).onChange(function GestureHandlerTsx3Factory(_ref4){var _worklet_8343887393993_init_data=_ref4._worklet_8343887393993_init_data,translateX=_ref4.translateX,maxTranslateX=_ref4.maxTranslateX,velocity=_ref4.velocity,GestureHandlerTsx3=function GestureHandlerTsx3(e){var newTranslateX=translateX.value+e.changeX;translateX.value=Math.max(-maxTranslateX,Math.min(0,newTranslateX)),velocity.value=e.velocityX};return GestureHandlerTsx3.__closure={translateX,maxTranslateX,velocity},GestureHandlerTsx3.__workletHash=8343887393993,GestureHandlerTsx3.__initData=_worklet_8343887393993_init_data,GestureHandlerTsx3}({_worklet_8343887393993_init_data,translateX,maxTranslateX,velocity})).onEnd(function GestureHandlerTsx2Factory(_ref5){var _worklet_11969384653096_init_data=_ref5._worklet_11969384653096_init_data,enableInertia=_ref5.enableInertia,isDecelerating=_ref5.isDecelerating,runOnJS=_ref5.runOnJS,onDragEnd=_ref5.onDragEnd,translateX=_ref5.translateX,GestureHandlerTsx2=function GestureHandlerTsx2(){enableInertia?isDecelerating.value=!0:runOnJS(onDragEnd)({newTranslateX:translateX.value})};return GestureHandlerTsx2.__closure={enableInertia,isDecelerating,runOnJS,onDragEnd,translateX},GestureHandlerTsx2.__workletHash=0xae2d6eba128,GestureHandlerTsx2.__initData=_worklet_11969384653096_init_data,GestureHandlerTsx2}({_worklet_11969384653096_init_data,enableInertia,isDecelerating,runOnJS:_reactNativeReanimated.runOnJS,onDragEnd,translateX})),tapGesture=_reactNativeGestureHandler.Gesture.Tap().onEnd(function GestureHandlerTsx5Factory(_ref6){var _worklet_17015786604123_init_data=_ref6._worklet_17015786604123_init_data,disableTapSelection=_ref6.disableTapSelection,onSelection=_ref6.onSelection,canvasWidth=_ref6.canvasWidth,translateX=_ref6.translateX,totalCandleWidth=_ref6.totalCandleWidth,candleWidth=_ref6.candleWidth,candleSpace=_ref6.candleSpace,activePoints=_ref6.activePoints,runOnJS=_ref6.runOnJS,GestureHandlerTsx5=function GestureHandlerTsx5(event){if(!disableTapSelection&&onSelection){var x=event.x;if(!(x<0||x>canvasWidth)){var plotStart=canvasWidth/2+translateX.value;if(!(x<plotStart||x>plotStart+totalCandleWidth)){var adjustedX=x-plotStart,index=Math.floor(adjustedX/(candleWidth+candleSpace)),candle=activePoints[index];candle&&runOnJS(onSelection)(candle)}}}};return GestureHandlerTsx5.__closure={disableTapSelection,onSelection,canvasWidth,translateX,totalCandleWidth,candleWidth,candleSpace,activePoints,runOnJS},GestureHandlerTsx5.__workletHash=0xf79cbea865b,GestureHandlerTsx5.__initData=_worklet_17015786604123_init_data,GestureHandlerTsx5}({_worklet_17015786604123_init_data,disableTapSelection,onSelection,canvasWidth,translateX,totalCandleWidth,candleWidth,candleSpace,activePoints,runOnJS:_reactNativeReanimated.runOnJS})),composedGesture=_Platform.default.select({web:_reactNativeGestureHandler.Gesture.Race(panGesture,disableTapSelection?_reactNativeGestureHandler.Gesture.Tap():tapGesture),default:_reactNativeGestureHandler.Gesture.Race(panGesture)});return(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.GestureDetector,{gesture:composedGesture,children})}},"./src/NavigationControls/NavigationControls.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vectorIcons=__webpack_require__("./node_modules/@expo/vector-icons/build/Icons.js"),_StyleSheet=(_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/StyleSheet/index.js"))),_Text=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/Text/index.js")),_TouchableOpacity=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/TouchableOpacity/index.js")),_View=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/View/index.js")),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js"),styles=_StyleSheet.default.create({controlsContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",paddingVertical:12,paddingHorizontal:20},navigationButtons:{flexDirection:"row",alignItems:"center",gap:12,flex:1,marginRight:16},button:{backgroundColor:"transparent",padding:8,borderRadius:8,minWidth:40,height:40,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#007AFF"},disabledButton:{borderColor:"#CCCCCC"},buttonText:{color:"#007AFF",fontSize:16,fontWeight:"600"},disabledButtonText:{color:"#CCCCCC"},counterText:{minWidth:60,textAlign:"center",fontSize:14,flexShrink:1},actionButtons:{flexDirection:"row",gap:8,flexShrink:0},actionButton:{padding:8,borderRadius:8,backgroundColor:"#007AFF",height:40,width:40,alignItems:"center",justifyContent:"center"},resetButton:{backgroundColor:"#FF3B30"},samplesInfoContainer:{flexDirection:"row",alignItems:"center",gap:6},samplesInfo:{fontSize:14,opacity:.7}}),NavigationControls=function NavigationControls(_ref){var selectedCandle=_ref.selectedCandle,selectedIndex=_ref.selectedIndex,audioData=_ref.audioData,onPrev=_ref.onPrev,onNext=_ref.onNext,onReset=_ref.onReset,onCenter=_ref.onCenter,theme=_ref.theme;return(0,_jsxRuntime.jsxs)(_View.default,{style:[{paddingTop:10},theme.navigationContainer],children:[(0,_jsxRuntime.jsxs)(_View.default,{style:styles.samplesInfoContainer,children:[(0,_jsxRuntime.jsx)(_vectorIcons.MaterialCommunityIcons,{name:"waveform",size:16,color:theme.text.color,style:{opacity:.7}}),(0,_jsxRuntime.jsxs)(_Text.default,{style:[styles.samplesInfo,theme.text],children:[audioData.samples.toLocaleString()," audio samples"]})]}),(0,_jsxRuntime.jsxs)(_View.default,{style:styles.controlsContainer,children:[(0,_jsxRuntime.jsxs)(_View.default,{style:styles.navigationButtons,children:[(0,_jsxRuntime.jsx)(_TouchableOpacity.default,{style:[styles.button,!selectedCandle&&styles.disabledButton],onPress:onPrev,disabled:!selectedCandle,children:(0,_jsxRuntime.jsx)(_Text.default,{style:[styles.buttonText,!selectedCandle&&styles.disabledButtonText],children:"←"})}),(0,_jsxRuntime.jsx)(_Text.default,{style:[styles.counterText,theme.text],children:selectedCandle?`${selectedIndex+1} / ${audioData.dataPoints.length}`:`${audioData.dataPoints.length} items`}),(0,_jsxRuntime.jsx)(_TouchableOpacity.default,{style:[styles.button,!selectedCandle&&styles.disabledButton],onPress:onNext,disabled:!selectedCandle,children:(0,_jsxRuntime.jsx)(_Text.default,{style:[styles.buttonText,!selectedCandle&&styles.disabledButtonText],children:"→"})})]}),(0,_jsxRuntime.jsxs)(_View.default,{style:styles.actionButtons,children:[(0,_jsxRuntime.jsx)(_TouchableOpacity.default,{style:styles.actionButton,onPress:onCenter,accessibilityLabel:"Select current position",children:(0,_jsxRuntime.jsx)(_vectorIcons.MaterialIcons,{name:"gps-fixed",size:24,color:"white"})}),(0,_jsxRuntime.jsx)(_TouchableOpacity.default,{style:[styles.actionButton,styles.resetButton],onPress:onReset,accessibilityLabel:"Reset position",children:(0,_jsxRuntime.jsx)(_vectorIcons.MaterialIcons,{name:"refresh",size:24,color:"white"})})]})]})]})};exports.default=NavigationControls;NavigationControls.__docgenInfo={description:"",methods:[],displayName:"NavigationControls",props:{selectedCandle:{required:!0,tsType:{name:"union",raw:"DataPoint | null",elements:[{name:"DataPoint"},{name:"null"}]},description:""},selectedIndex:{required:!0,tsType:{name:"number"},description:""},audioData:{required:!0,tsType:{name:"AudioAnalysis"},description:""},currentTime:{required:!1,tsType:{name:"number"},description:""},onPrev:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onNext:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onReset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onCenter:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},theme:{required:!0,tsType:{name:"AudioVisualizerTheme"},description:""}}}}}]);