(self.webpackChunk_siteed_expo_audio_ui=self.webpackChunk_siteed_expo_audio_ui||[]).push([[237],{"./src/AudioTimeRangeSelector/AudioTimeRangeSelector.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioTimeRangeSelector=AudioTimeRangeSelector;var _slicedToArray2=_interopRequireDefault(__webpack_require__("./node_modules/@babel/runtime/helpers/slicedToArray.js")),_react=_interopRequireWildcard(__webpack_require__("./node_modules/react/index.js")),_StyleSheet=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/StyleSheet/index.js")),_Text=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/Text/index.js")),_View=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/View/index.js")),_reactNativeGestureHandler=__webpack_require__("./node_modules/react-native-gesture-handler/lib/module/index.js"),_reactNativeReanimated=_interopRequireWildcard(__webpack_require__("./node_modules/react-native-reanimated/lib/module/index.js")),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}var DEFAULT_THEME={container:{backgroundColor:"#E5E5E5",height:40,borderRadius:8},selectedRange:{backgroundColor:"#007AFF",opacity:.5},handle:{backgroundColor:"#007AFF",width:16}},_worklet_5804426675519_init_data={code:"function AudioTimeRangeSelectorTsx1(){const{isDragging,activeHandle,isStart,lastUpdate,runOnJS,setActiveLabel}=this.__closure;isDragging.value=true;activeHandle.value=isStart?'start':'end';const currentTime=isStart?lastUpdate.value.start:lastUpdate.value.end;runOnJS(setActiveLabel)({time:currentTime,handle:isStart?'start':'end'});}"},_worklet_12096124697318_init_data={code:"function AudioTimeRangeSelectorTsx2(event){const{isStart,startPosition,endPosition,theme,containerWidth,durationMs,lastUpdate,runOnJS,setActiveLabel}=this.__closure;const position=isStart?startPosition:endPosition;const handleWidth=theme.handle.width;const maxX=containerWidth-handleWidth;const newPosition=position.value+event.changeX;const clampedX=Math.min(Math.max(0,newPosition),maxX);position.value=isStart?Math.min(clampedX,endPosition.value-handleWidth-20):Math.max(clampedX,startPosition.value+handleWidth+20);const newTimeMs=Math.round(position.value/containerWidth*durationMs);const clampedTimeMs=isStart?Math.min(Math.max(0,newTimeMs),lastUpdate.value.end-100):Math.min(Math.max(lastUpdate.value.start+100,newTimeMs),durationMs);if(isStart){lastUpdate.value={...lastUpdate.value,start:clampedTimeMs};}else{lastUpdate.value={...lastUpdate.value,end:clampedTimeMs};}runOnJS(setActiveLabel)({time:clampedTimeMs,handle:isStart?'start':'end'});}"},_worklet_14955647973375_init_data={code:"function AudioTimeRangeSelectorTsx3(){const{lastUpdate,isDragging,activeHandle,runOnJS,setActiveLabel,onRangeChange,onRangeChangeComplete}=this.__closure;const finalStart=lastUpdate.value.start;const finalEnd=lastUpdate.value.end;isDragging.value=false;activeHandle.value=null;runOnJS(setActiveLabel)(null);runOnJS(onRangeChange)(finalStart,finalEnd);if(onRangeChangeComplete){runOnJS(onRangeChangeComplete)(finalStart,finalEnd);}}"},_worklet_8847140996171_init_data={code:"function AudioTimeRangeSelectorTsx4(){const{isDragging}=this.__closure;return{opacity:isDragging.value?1:0,transform:[{translateX:-20},{translateY:isDragging.value?0:10}]};}"},_worklet_9966008069299_init_data={code:"function AudioTimeRangeSelectorTsx5(){const{startPosition,activeHandle,withTiming,theme}=this.__closure;return{transform:[{translateX:startPosition.value}],backgroundColor:activeHandle.value==='start'?withTiming('#0056b3'):withTiming(theme.handle.backgroundColor)};}"},_worklet_12948220113263_init_data={code:"function AudioTimeRangeSelectorTsx6(){const{endPosition,theme,activeHandle,withTiming}=this.__closure;return{transform:[{translateX:endPosition.value-theme.handle.width}],backgroundColor:activeHandle.value==='end'?withTiming('#0056b3'):withTiming(theme.handle.backgroundColor)};}"},_worklet_15779785713103_init_data={code:"function AudioTimeRangeSelectorTsx7(){const{startPosition,containerWidth,endPosition,theme}=this.__closure;return{left:startPosition.value,right:containerWidth-endPosition.value,backgroundColor:theme.selectedRange.backgroundColor,opacity:theme.selectedRange.opacity};}"};function AudioTimeRangeSelector(_ref){var durationMs=_ref.durationMs,startTime=_ref.startTime,endTime=_ref.endTime,onRangeChange=_ref.onRangeChange,onRangeChangeComplete=_ref.onRangeChangeComplete,disabled=_ref.disabled,customTheme=_ref.theme,theme={container:Object.assign({},DEFAULT_THEME.container,null==customTheme?void 0:customTheme.container),selectedRange:Object.assign({},DEFAULT_THEME.selectedRange,null==customTheme?void 0:customTheme.selectedRange),handle:Object.assign({},DEFAULT_THEME.handle,null==customTheme?void 0:customTheme.handle)},_useState=(0,_react.useState)(0),_useState2=(0,_slicedToArray2.default)(_useState,2),containerWidth=_useState2[0],setContainerWidth=_useState2[1],_useState3=(0,_react.useState)(null),_useState4=(0,_slicedToArray2.default)(_useState3,2),activeLabel=_useState4[0],setActiveLabel=_useState4[1],isDragging=(0,_reactNativeReanimated.useSharedValue)(!1),activeHandle=(0,_reactNativeReanimated.useSharedValue)(null),startPosition=(0,_reactNativeReanimated.useSharedValue)(0),endPosition=(0,_reactNativeReanimated.useSharedValue)(0),lastUpdate=(0,_reactNativeReanimated.useSharedValue)({start:startTime,end:endTime}),updateTimeout=(0,_reactNativeReanimated.useSharedValue)(null);(0,_react.useEffect)((function(){if(0!==containerWidth&&0!==durationMs&&!isDragging.value)return updateTimeout.value&&clearTimeout(updateTimeout.value),updateTimeout.value=setTimeout((function(){var isValidRange=startTime>=0&&endTime>startTime&&endTime<=durationMs&&endTime-startTime>=100,validStartTime=isValidRange?startTime:0,validEndTime=isValidRange?endTime:durationMs;lastUpdate.value={start:validStartTime,end:validEndTime},startPosition.value=validStartTime/durationMs*containerWidth,endPosition.value=validEndTime/durationMs*containerWidth,isValidRange||(0,_reactNativeReanimated.runOnJS)(onRangeChange)(validStartTime,validEndTime)}),100),function(){updateTimeout.value&&clearTimeout(updateTimeout.value)}}),[startTime,endTime,durationMs,containerWidth]);var AudioTimeRangeSelectorTsx4,AudioTimeRangeSelectorTsx5,AudioTimeRangeSelectorTsx6,AudioTimeRangeSelectorTsx7,createHandleGesture=function createHandleGesture(isStart){return _reactNativeGestureHandler.Gesture.Pan().enabled(!disabled).activeOffsetX([-5,5]).activateAfterLongPress(0).onStart((AudioTimeRangeSelectorTsx1=function AudioTimeRangeSelectorTsx1(){isDragging.value=!0,activeHandle.value=isStart?"start":"end";var currentTime=isStart?lastUpdate.value.start:lastUpdate.value.end;(0,_reactNativeReanimated.runOnJS)(setActiveLabel)({time:currentTime,handle:isStart?"start":"end"})},AudioTimeRangeSelectorTsx1.__closure={isDragging,activeHandle,isStart,lastUpdate,runOnJS:_reactNativeReanimated.runOnJS,setActiveLabel},AudioTimeRangeSelectorTsx1.__workletHash=5804426675519,AudioTimeRangeSelectorTsx1.__initData=_worklet_5804426675519_init_data,AudioTimeRangeSelectorTsx1)).onChange((AudioTimeRangeSelectorTsx2=function AudioTimeRangeSelectorTsx2(event){var position=isStart?startPosition:endPosition,handleWidth=theme.handle.width,maxX=containerWidth-handleWidth,newPosition=position.value+event.changeX,clampedX=Math.min(Math.max(0,newPosition),maxX);position.value=isStart?Math.min(clampedX,endPosition.value-handleWidth-20):Math.max(clampedX,startPosition.value+handleWidth+20);var newTimeMs=Math.round(position.value/containerWidth*durationMs),clampedTimeMs=isStart?Math.min(Math.max(0,newTimeMs),lastUpdate.value.end-100):Math.min(Math.max(lastUpdate.value.start+100,newTimeMs),durationMs);lastUpdate.value=isStart?Object.assign({},lastUpdate.value,{start:clampedTimeMs}):Object.assign({},lastUpdate.value,{end:clampedTimeMs}),(0,_reactNativeReanimated.runOnJS)(setActiveLabel)({time:clampedTimeMs,handle:isStart?"start":"end"})},AudioTimeRangeSelectorTsx2.__closure={isStart,startPosition,endPosition,theme,containerWidth,durationMs,lastUpdate,runOnJS:_reactNativeReanimated.runOnJS,setActiveLabel},AudioTimeRangeSelectorTsx2.__workletHash=0xb0059373ae6,AudioTimeRangeSelectorTsx2.__initData=_worklet_12096124697318_init_data,AudioTimeRangeSelectorTsx2)).onFinalize(((AudioTimeRangeSelectorTsx3=function AudioTimeRangeSelectorTsx3(){var finalStart=lastUpdate.value.start,finalEnd=lastUpdate.value.end;isDragging.value=!1,activeHandle.value=null,(0,_reactNativeReanimated.runOnJS)(setActiveLabel)(null),(0,_reactNativeReanimated.runOnJS)(onRangeChange)(finalStart,finalEnd),onRangeChangeComplete&&(0,_reactNativeReanimated.runOnJS)(onRangeChangeComplete)(finalStart,finalEnd)}).__closure={lastUpdate,isDragging,activeHandle,runOnJS:_reactNativeReanimated.runOnJS,setActiveLabel,onRangeChange,onRangeChangeComplete},AudioTimeRangeSelectorTsx3.__workletHash=0xd9a2215b7ff,AudioTimeRangeSelectorTsx3.__initData=_worklet_14955647973375_init_data,AudioTimeRangeSelectorTsx3));var AudioTimeRangeSelectorTsx3,AudioTimeRangeSelectorTsx2,AudioTimeRangeSelectorTsx1},startHandleGesture=createHandleGesture(!0),endHandleGesture=createHandleGesture(!1),formatTime=(0,_react.useCallback)((function(ms){if("number"!=typeof ms||isNaN(ms))return"0:00";var seconds=Math.floor(ms/1e3);return`${Math.floor(seconds/60)}:${(seconds%60).toString().padStart(2,"0")}`}),[]),labelStyle=(0,_reactNativeReanimated.useAnimatedStyle)(((AudioTimeRangeSelectorTsx4=function AudioTimeRangeSelectorTsx4(){return{opacity:isDragging.value?1:0,transform:[{translateX:-20},{translateY:isDragging.value?0:10}]}}).__closure={isDragging},AudioTimeRangeSelectorTsx4.__workletHash=8847140996171,AudioTimeRangeSelectorTsx4.__initData=_worklet_8847140996171_init_data,AudioTimeRangeSelectorTsx4)),startHandleAnimatedStyle=(0,_reactNativeReanimated.useAnimatedStyle)(((AudioTimeRangeSelectorTsx5=function AudioTimeRangeSelectorTsx5(){return{transform:[{translateX:startPosition.value}],backgroundColor:"start"===activeHandle.value?(0,_reactNativeReanimated.withTiming)("#0056b3"):(0,_reactNativeReanimated.withTiming)(theme.handle.backgroundColor)}}).__closure={startPosition,activeHandle,withTiming:_reactNativeReanimated.withTiming,theme},AudioTimeRangeSelectorTsx5.__workletHash=9966008069299,AudioTimeRangeSelectorTsx5.__initData=_worklet_9966008069299_init_data,AudioTimeRangeSelectorTsx5)),endHandleAnimatedStyle=(0,_reactNativeReanimated.useAnimatedStyle)(((AudioTimeRangeSelectorTsx6=function AudioTimeRangeSelectorTsx6(){return{transform:[{translateX:endPosition.value-theme.handle.width}],backgroundColor:"end"===activeHandle.value?(0,_reactNativeReanimated.withTiming)("#0056b3"):(0,_reactNativeReanimated.withTiming)(theme.handle.backgroundColor)}}).__closure={endPosition,theme,activeHandle,withTiming:_reactNativeReanimated.withTiming},AudioTimeRangeSelectorTsx6.__workletHash=0xbc6be0f716f,AudioTimeRangeSelectorTsx6.__initData=_worklet_12948220113263_init_data,AudioTimeRangeSelectorTsx6)),selectedRangeStyle=(0,_reactNativeReanimated.useAnimatedStyle)(((AudioTimeRangeSelectorTsx7=function AudioTimeRangeSelectorTsx7(){return{left:startPosition.value,right:containerWidth-endPosition.value,backgroundColor:theme.selectedRange.backgroundColor,opacity:theme.selectedRange.opacity}}).__closure={startPosition,containerWidth,endPosition,theme},AudioTimeRangeSelectorTsx7.__workletHash=0xe5a0485a5cf,AudioTimeRangeSelectorTsx7.__initData=_worklet_15779785713103_init_data,AudioTimeRangeSelectorTsx7)),handleLayout=(0,_react.useCallback)((function(event){var width=event.nativeEvent.layout.width;setContainerWidth(width),startPosition.value=lastUpdate.value.start/durationMs*width,endPosition.value=lastUpdate.value.end/durationMs*width}),[durationMs]);return(0,_jsxRuntime.jsxs)(_View.default,{onLayout:handleLayout,style:[styles.container,{height:theme.container.height+30}],children:[(0,_jsxRuntime.jsx)(_View.default,{style:[styles.rangeContainer,{backgroundColor:theme.container.backgroundColor,height:theme.container.height,borderRadius:theme.container.borderRadius}],children:(0,_jsxRuntime.jsxs)(_View.default,{style:styles.gestureContainer,children:[(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[styles.selectedRange,selectedRangeStyle]}),(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.GestureDetector,{gesture:startHandleGesture,children:(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{pointerEvents:"auto",hitSlop:{left:32,right:32,top:32,bottom:32},style:[styles.handle,{width:theme.handle.width},startHandleAnimatedStyle,styles.handleTouchable]})}),(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.GestureDetector,{gesture:endHandleGesture,children:(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{pointerEvents:"auto",hitSlop:{left:32,right:32,top:32,bottom:32},style:[styles.handle,{width:theme.handle.width},endHandleAnimatedStyle,styles.handleTouchable]})})]})}),activeLabel&&"number"==typeof activeLabel.time&&(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[styles.timeLabel,labelStyle,"start"===activeLabel.handle?styles.leftLabel:styles.rightLabel],children:(0,_jsxRuntime.jsx)(_Text.default,{style:styles.timeLabelText,children:formatTime(activeLabel.time)})})]})}var styles=_StyleSheet.default.create({container:{position:"relative"},rangeContainer:{overflow:"hidden"},gestureContainer:{flex:1,position:"relative"},selectedRange:{position:"absolute",top:0,bottom:0},handle:{position:"absolute",height:"100%"},handleTouchable:{shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},timeLabel:{position:"absolute",top:-25,backgroundColor:"rgba(0,0,0,0.8)",padding:4,borderRadius:4},timeLabelText:{color:"white",fontSize:12},leftLabel:{left:0},rightLabel:{right:0}});AudioTimeRangeSelector.__docgenInfo={description:"",methods:[],displayName:"AudioTimeRangeSelector",props:{durationMs:{required:!0,tsType:{name:"number"},description:""},startTime:{required:!0,tsType:{name:"number"},description:""},endTime:{required:!0,tsType:{name:"number"},description:""},onRangeChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(start: number, end: number) => void",signature:{arguments:[{type:{name:"number"},name:"start"},{type:{name:"number"},name:"end"}],return:{name:"void"}}},description:""},onRangeChangeComplete:{required:!1,tsType:{name:"signature",type:"function",raw:"(start: number, end: number) => void",signature:{arguments:[{type:{name:"number"},name:"start"},{type:{name:"number"},name:"end"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},theme:{required:!1,tsType:{name:"Partial",elements:[{name:"AudioTimeRangeSelectorTheme"}],raw:"Partial<AudioTimeRangeSelectorTheme>"},description:""}}}}}]);