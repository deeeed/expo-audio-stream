(self.webpackChunk_siteed_expo_audio_ui=self.webpackChunk_siteed_expo_audio_ui||[]).push([[106],{"./src/AnimatedCandle/AnimatedCandle.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reactNativeSkia=__webpack_require__("./node_modules/@shopify/react-native-skia/lib/module/index.js"),_react=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("./node_modules/react/index.js")),_reactNativeReanimated=__webpack_require__("./node_modules/react-native-reanimated/lib/module/index.web.js"),_constants=__webpack_require__("./src/constants.tsx"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}var AnimatedCandle=function AnimatedCandle(_ref){var targetColor=_ref.color,targetX=_ref.x,targetY=_ref.y,startY=_ref.startY,targetHeight=_ref.height,width=_ref.width,_ref$animated=_ref.animated,animated=void 0===_ref$animated||_ref$animated,y=(0,_reactNativeReanimated.useSharedValue)(startY),height=(0,_reactNativeReanimated.useSharedValue)(0),x=(0,_reactNativeReanimated.useSharedValue)(targetX),color=(0,_reactNativeReanimated.useSharedValue)(_constants.CANDLE_OFFCANVAS_COLOR);return(0,_react.useEffect)((function(){animated?(y.value=(0,_reactNativeReanimated.withTiming)(targetY,{duration:500}),height.value=(0,_reactNativeReanimated.withTiming)(targetHeight,{duration:500}),x.value=(0,_reactNativeReanimated.withTiming)(targetX,{duration:500}),color.value=(0,_reactNativeReanimated.withTiming)(targetColor,{duration:500})):(y.value=targetY,height.value=targetHeight,x.value=targetX,color.value=targetColor)}),[targetY,targetHeight,targetX,targetColor,animated]),(0,_jsxRuntime.jsx)(_reactNativeSkia.Rect,{x:targetX,y,width,height,color})};exports.default=_react.default.memo(AnimatedCandle);AnimatedCandle.__docgenInfo={description:"",methods:[],displayName:"AnimatedCandle",props:{height:{required:!0,tsType:{name:"number"},description:""},x:{required:!0,tsType:{name:"number"},description:""},y:{required:!0,tsType:{name:"number"},description:""},startY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},color:{required:!0,tsType:{name:"string"},description:""},animated:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}},"./src/AudioVisualizer/AudioVisualizers.helpers.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateActivePoints=exports.syncTranslateX=exports.drawDottedLine=exports.createDefaultTheme=exports.calculateReferenceLinePosition=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),_reactNativeSkia=__webpack_require__("./node_modules/@shopify/react-native-skia/lib/module/index.js"),_reactNativeLogger=__webpack_require__("./node_modules/@siteed/react-native-logger/dist/logger.js"),_reactNativeReanimated=__webpack_require__("./node_modules/react-native-reanimated/lib/module/index.web.js"),_constants=__webpack_require__("./src/constants.tsx"),logger=(exports.calculateReferenceLinePosition=function calculateReferenceLinePosition(_ref){var canvasWidth=_ref.canvasWidth;return"RIGHT"===_ref.referenceLinePosition?canvasWidth-15:canvasWidth/2},(0,_reactNativeLogger.getLogger)("AudioVisualiser.helpers"));exports.createDefaultTheme=function createDefaultTheme(canvasWidth,referenceLineX){return{container:{justifyContent:"center",alignItems:"center"},navigationContainer:{width:"100%",alignItems:"center"},canvasContainer:{width:canvasWidth,backgroundColor:"#292a2d",justifyContent:"center",alignItems:"center",gap:5},referenceLine:{position:"absolute",top:0,bottom:0,left:referenceLineX,width:2,backgroundColor:"red"},text:{color:"black"},button:{},buttonText:{},dottedLineColor:"grey",yAxis:{tickColor:_constants.DEFAULT_TICK_COLOR,labelColor:_constants.DEFAULT_LABEL_COLOR},timeRuler:{tickColor:_constants.DEFAULT_TICK_COLOR,labelColor:_constants.DEFAULT_LABEL_COLOR},candle:{activeAudioColor:_constants.CANDLE_ACTIVE_AUDIO_COLOR,activeSpeechColor:_constants.CANDLE_ACTIVE_SPEECH_COLOR,offcanvasColor:_constants.CANDLE_OFFCANVAS_COLOR,selectedColor:_constants.CANDLE_SELECTED_COLOR}}},exports.syncTranslateX=function syncTranslateX(_ref2){var currentTime=_ref2.currentTime,durationMs=_ref2.durationMs,maxTranslateX=_ref2.maxTranslateX,translateX=_ref2.translateX;if(durationMs){var x=-(1e3*currentTime/durationMs)*maxTranslateX;return translateX.value=(0,_reactNativeReanimated.withSpring)(x,{damping:20,stiffness:90}),x}return translateX.value},exports.drawDottedLine=function drawDottedLine(_ref3){for(var canvasWidth=_ref3.canvasWidth,canvasHeight=_ref3.canvasHeight,path=_reactNativeSkia.Skia.Path.Make(),baseline=canvasHeight/2,x=0;x<canvasWidth;x+=8)path.moveTo(x,baseline),path.lineTo(x+3,baseline);return path},exports.updateActivePoints=function updateActivePoints(_ref4){var _activePoints$,_activePoints2,x=_ref4.x,context=_ref4.context,dataPoints=context.dataPoints,activePoints=context.activePoints,maxDisplayedItems=context.maxDisplayedItems,referenceLineX=context.referenceLineX,mode=context.mode,range=context.range,candleWidth=context.candleWidth,candleSpace=context.candleSpace;if(0===dataPoints.length)return{activePoints,range,lastUpdatedTranslateX:x};logger.debug(`Updating active points x=${x}, mode=${mode}, dataPoints.length=${dataPoints.length}, activePoints.length=${activePoints.length}, referenceLineX=${referenceLineX}, maxDisplayedItems=${maxDisplayedItems}`);var result={activePoints:[],range:{start:0,end:0,startVisibleIndex:0,endVisibleIndex:0},lastUpdatedTranslateX:x},lastPointIndex=-1;if("live"===mode){var _activePoints$id,_activePoints,totalItems=dataPoints.length,liveMaxDisplayedItems=Math.floor(referenceLineX/(candleWidth+candleSpace)),startIndex=Math.max(0,totalItems-liveMaxDisplayedItems),updatedPoints=(0,_toConsumableArray2.default)(activePoints),addedPointsCount=0,lastUpdatedPointId=null!=(_activePoints$id=null==(_activePoints=activePoints[activePoints.length-1])?void 0:_activePoints.id)?_activePoints$id:-1;logger.log(`Last updated point ID: ${lastUpdatedPointId} activePoints.length=${activePoints.length}`);for(var i=dataPoints.length-1;i>=0;i--)if(dataPoints[i].id===lastUpdatedPointId){lastPointIndex=i;break}logger.log(`Last point index: ${lastPointIndex}`);for(var _i=0;_i<liveMaxDisplayedItems;_i++){var itemIndex=startIndex+_i,dataPoint=dataPoints[itemIndex];if(!dataPoint)break;itemIndex>lastPointIndex&&(updatedPoints.push(Object.assign({},dataPoint,{visible:!0})),addedPointsCount++)}logger.log(`Live mode: Updated ${updatedPoints.length} active points`,updatedPoints);var finalUpdatedPoints=updatedPoints.slice(-liveMaxDisplayedItems);result.activePoints=(0,_toConsumableArray2.default)(finalUpdatedPoints),logger.log(`Live mode: Updated ${finalUpdatedPoints.length} active points`,finalUpdatedPoints),logger.log(`Number of new points added: ${addedPointsCount}`)}else{for(var translateX=Math.abs(x),rawHiddenItemsLeft=Math.floor(translateX/(candleWidth+candleSpace)),itemsOffset=Math.floor(maxDisplayedItems/2),hiddenItemsLeft=Math.max(0,rawHiddenItemsLeft-itemsOffset),_startIndex=Math.max(0,hiddenItemsLeft-maxDisplayedItems),startVisibleIndex=_startIndex+Math.min(hiddenItemsLeft,maxDisplayedItems),endIndex=_startIndex+3*maxDisplayedItems,endVisibleIndex=startVisibleIndex+maxDisplayedItems,loopTo=3*maxDisplayedItems,_i2=0;_i2<loopTo;_i2++){var _itemIndex=_startIndex+_i2,_dataPoint=dataPoints[_itemIndex];if(_dataPoint){var visible=_itemIndex>=startVisibleIndex&&_itemIndex<=endVisibleIndex;activePoints[_i2]=Object.assign({},_dataPoint,{visible})}else activePoints[_i2]={amplitude:0,id:-1,visible:!1}}result.activePoints=(0,_toConsumableArray2.default)(activePoints),result.range={start:_startIndex,end:endIndex,startVisibleIndex,endVisibleIndex},logger.debug(`Range updated: start=${_startIndex}, end=${endIndex}, startVisibleIndex=${startVisibleIndex}, endVisibleIndex=${endVisibleIndex}`)}return logger.debug(`Active points updated. First point ID: ${null==(_activePoints$=activePoints[0])?void 0:_activePoints$.id}, Last point ID: ${null==(_activePoints2=activePoints[activePoints.length-1])?void 0:_activePoints2.id}`),result}},"./src/AudioVisualizer/CanvasContainer.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reactNativeSkia=__webpack_require__("./node_modules/@shopify/react-native-skia/lib/module/index.js"),_react=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("./node_modules/react/index.js")),_Platform=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/Platform/index.js")),_View=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/View/index.js")),_reactNativeReanimated=__webpack_require__("./node_modules/react-native-reanimated/lib/module/index.web.js"),_AnimatedCandle=_interopRequireDefault(__webpack_require__("./src/AnimatedCandle/AnimatedCandle.tsx")),_SkiaTimeRuler=__webpack_require__("./src/SkiaTimeRuler/SkiaTimeRuler.tsx"),_Waveform=_interopRequireDefault(__webpack_require__("./src/Waveform/Waveform.tsx")),_YAxis=__webpack_require__("./src/YAxis/YAxis.tsx"),_constants=__webpack_require__("./src/constants.tsx"),_AudioVisualizers=__webpack_require__("./src/AudioVisualizer/AudioVisualizers.helpers.tsx"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}var _worklet_136941839645_init_data={code:"function anonymous(){const{translateX}=this.__closure;return[{translateX:translateX.value}];}"},CanvasContainer=function CanvasContainer(_ref){var anonymous,canvasHeight=_ref.canvasHeight,candleWidth=_ref.candleWidth,candleSpace=_ref.candleSpace,showDottedLine=_ref.showDottedLine,showYAxis=_ref.showYAxis,showRuler=_ref.showRuler,mode=_ref.mode,translateX=_ref.translateX,activePoints=_ref.activePoints,maxDisplayedItems=_ref.maxDisplayedItems,paddingLeft=_ref.paddingLeft,algorithm=_ref.algorithm,totalCandleWidth=_ref.totalCandleWidth,startIndex=_ref.startIndex,canvasWidth=_ref.canvasWidth,selectedCandle=_ref.selectedCandle,showSilence=_ref.showSilence,durationMs=_ref.durationMs,font=_ref.font,theme=_ref.theme,onSelection=_ref.onSelection,minAmplitude=_ref.minAmplitude,maxAmplitude=_ref.maxAmplitude,scaleToHumanVoice=_ref.scaleToHumanVoice,_ref$disableTapSelect=_ref.disableTapSelection,disableTapSelection=void 0!==_ref$disableTapSelect&&_ref$disableTapSelect,_ref$visualizationTyp=_ref.visualizationType,visualizationType=void 0===_ref$visualizationTyp?"candles":_ref$visualizationTyp,candleColors=Object.assign({},_constants.defaultCandleColors,theme.candle),groupTransform=(0,_reactNativeReanimated.useDerivedValue)(((anonymous=function anonymous(){return[{translateX:translateX.value}]}).__closure={translateX},anonymous.__workletHash=136941839645,anonymous.__initData=_worklet_136941839645_init_data,anonymous)),scalingFactorRef=(0,_react.useRef)(1),humanVoiceScalingFactorRef=(0,_react.useRef)(1);(0,_react.useEffect)((function(){scalingFactorRef.current=canvasHeight/maxAmplitude,humanVoiceScalingFactorRef.current=canvasHeight/.19}),[maxAmplitude,canvasHeight]);var memoizedCandles=(0,_react.useMemo)((function(){return activePoints.map((function(_ref2,index){var id=_ref2.id,amplitude=_ref2.amplitude,visible=_ref2.visible,activeSpeech=_ref2.activeSpeech,silent=_ref2.silent;if(-1===id)return null;var scaledAmplitude,centerY=canvasHeight/2;scaleToHumanVoice?scaledAmplitude=amplitude<=.2?(amplitude-.01)/.19*(.95*canvasHeight):.95*canvasHeight+canvasHeight*(1-.95)*(Math.log(amplitude/.2)/Math.log(4)):scaledAmplitude=amplitude/.8*canvasHeight;var clampedAmplitude=Math.max(0,Math.min(scaledAmplitude,canvasHeight)),delta=Math.ceil(maxDisplayedItems/2)*(candleWidth+candleSpace);"live"===mode&&(delta=0);var x=(candleWidth+candleSpace)*index+startIndex*(candleWidth+candleSpace)+delta,color=candleColors.activeAudioColor;visible?selectedCandle&&selectedCandle.id===id?color=candleColors.selectedColor:activeSpeech&&(color=candleColors.activeSpeechColor):color=candleColors.offcanvasColor;var key=`${id}`;return(0,_jsxRuntime.jsxs)(_react.default.Fragment,{children:[selectedCandle&&selectedCandle.id===id&&(0,_jsxRuntime.jsx)(_reactNativeSkia.Path,{path:`M${x},0 L${x+candleWidth},0 L${x+candleWidth},${canvasHeight} L${x},${canvasHeight} Z`,color:"red",style:"stroke",strokeWidth:2}),(!silent||showSilence)&&(0,_jsxRuntime.jsx)(_AnimatedCandle.default,{animated:!0,x,y:centerY-clampedAmplitude/2,startY:centerY,width:candleWidth,height:clampedAmplitude,color})]},key)}))}),[activePoints,canvasHeight,minAmplitude,maxAmplitude,maxDisplayedItems,showSilence,candleWidth,candleSpace,candleColors,mode,startIndex,selectedCandle,scaleToHumanVoice]),hasProcessedEvent=(0,_react.useRef)(!1),processEvent=(0,_react.useCallback)((function(event){if("live"!==mode&&!hasProcessedEvent.current&&!disableTapSelection){var x=event.x,y=event.y;if(!(x<0||x>canvasWidth||y<0||y>canvasHeight)){hasProcessedEvent.current=!0,setTimeout((function(){hasProcessedEvent.current=!1}),300);var plotStart=canvasWidth/2+translateX.value;if(!(x<plotStart||x>plotStart+totalCandleWidth)){var adjustedX=x-plotStart,index=Math.floor(adjustedX/(candleWidth+candleSpace)),candle=activePoints[index];candle&&(null==onSelection||onSelection(candle))}}}}),[mode,canvasWidth,canvasHeight,translateX,totalCandleWidth,candleWidth,candleSpace,activePoints,onSelection,disableTapSelection]),touchHandler=(0,_reactNativeSkia.useTouchHandler)({onStart:function onStart(){},onEnd:processEvent}),visualizationContent=(0,_react.useMemo)((function(){return"waveform"===visualizationType?(0,_jsxRuntime.jsx)(_Waveform.default,{activePoints,canvasHeight,canvasWidth,minAmplitude,maxAmplitude,theme}):memoizedCandles}),[visualizationType,activePoints,canvasHeight,canvasWidth,minAmplitude,maxAmplitude,theme,memoizedCandles]);return(0,_jsxRuntime.jsx)(_View.default,{style:theme.canvasContainer,children:(0,_jsxRuntime.jsxs)(_reactNativeSkia.Canvas,{style:{height:canvasHeight,width:canvasWidth},onTouch:"web"===_Platform.default.OS||disableTapSelection?void 0:touchHandler,children:[(0,_jsxRuntime.jsxs)(_reactNativeSkia.Group,{transform:groupTransform,children:[visualizationContent,showRuler&&(0,_jsxRuntime.jsx)(_SkiaTimeRuler.SkiaTimeRuler,{duration:null!=durationMs?durationMs:0,paddingLeft,width:totalCandleWidth,font,tickColor:theme.timeRuler.tickColor,labelColor:theme.timeRuler.labelColor})]}),showDottedLine&&(0,_jsxRuntime.jsx)(_reactNativeSkia.Path,{path:(0,_AudioVisualizers.drawDottedLine)({canvasWidth,canvasHeight}),color:theme.dottedLineColor||"grey",style:"stroke",strokeWidth:1}),showYAxis&&(0,_jsxRuntime.jsx)(_YAxis.YAxis,{canvasHeight,canvasWidth,minAmplitude,maxAmplitude,algorithm,font,padding:10,tickColor:theme.yAxis.tickColor,labelColor:theme.yAxis.labelColor})]})})};exports.default=_react.default.memo(CanvasContainer);CanvasContainer.__docgenInfo={description:"",methods:[],displayName:"CanvasContainer",props:{canvasHeight:{required:!0,tsType:{name:"number"},description:""},candleWidth:{required:!0,tsType:{name:"number"},description:""},candleSpace:{required:!0,tsType:{name:"number"},description:""},showDottedLine:{required:!0,tsType:{name:"boolean"},description:""},showRuler:{required:!0,tsType:{name:"boolean"},description:""},showSilence:{required:!0,tsType:{name:"boolean"},description:""},showYAxis:{required:!0,tsType:{name:"boolean"},description:""},mode:{required:!0,tsType:{name:"union",raw:"'static' | 'live' | 'scaled'",elements:[{name:"literal",value:"'static'"},{name:"literal",value:"'live'"},{name:"literal",value:"'scaled'"}]},description:""},algorithm:{required:!0,tsType:{name:"union",raw:"'peak' | 'rms'",elements:[{name:"literal",value:"'peak'"},{name:"literal",value:"'rms'"}]},description:""},translateX:{required:!0,tsType:{name:"SharedValue",elements:[{name:"number"}],raw:"SharedValue<number>"},description:""},activePoints:{required:!0,tsType:{name:"Array",elements:[{name:"CandleData"}],raw:"CandleData[]"},description:""},maxDisplayedItems:{required:!0,tsType:{name:"number"},description:""},paddingLeft:{required:!0,tsType:{name:"number"},description:""},totalCandleWidth:{required:!0,tsType:{name:"number"},description:""},startIndex:{required:!0,tsType:{name:"number"},description:""},canvasWidth:{required:!0,tsType:{name:"number"},description:""},selectedCandle:{required:!0,tsType:{name:"union",raw:"DataPoint | null",elements:[{name:"DataPoint"},{name:"null"}]},description:""},durationMs:{required:!1,tsType:{name:"number"},description:""},minAmplitude:{required:!0,tsType:{name:"number"},description:""},maxAmplitude:{required:!0,tsType:{name:"number"},description:""},onSelection:{required:!0,tsType:{name:"signature",type:"function",raw:"(dataPoint: DataPoint) => void",signature:{arguments:[{type:{name:"DataPoint"},name:"dataPoint"}],return:{name:"void"}}},description:""},theme:{required:!0,tsType:{name:"AudioVisualizerTheme"},description:""},font:{required:!1,tsType:{name:"SkFont"},description:""},scaleToHumanVoice:{required:!0,tsType:{name:"boolean"},description:""},disableTapSelection:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},visualizationType:{required:!1,tsType:{name:"union",raw:"'candles' | 'waveform'",elements:[{name:"literal",value:"'candles'"},{name:"literal",value:"'waveform'"}]},description:"",defaultValue:{value:"'candles'",computed:!1}}}}},"./src/SkiaTimeRuler/SkiaTimeRuler.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.SkiaTimeRuler=void 0;var _reactNativeSkia=__webpack_require__("./node_modules/@shopify/react-native-skia/lib/module/index.js"),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_constants=__webpack_require__("./src/constants.tsx"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js"),formatTime=function formatTime(seconds){var h=Math.floor(seconds/3600),m=Math.floor(seconds%3600/60),s=seconds%60;return h>0?`${h}:${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${m}:${s.toString().padStart(2,"0")}`};(exports.SkiaTimeRuler=function SkiaTimeRuler(_ref){var duration=_ref.duration,width=_ref.width,font=_ref.font,_ref$interval=_ref.interval,interval=void 0===_ref$interval?1:_ref$interval,_ref$tickHeight=_ref.tickHeight,tickHeight=void 0===_ref$tickHeight?10:_ref$tickHeight,_ref$paddingLeft=_ref.paddingLeft,paddingLeft=void 0===_ref$paddingLeft?0:_ref$paddingLeft,tickColor=_ref.tickColor,labelColor=_ref.labelColor,_ref$labelFontSize=_ref.labelFontSize,labelFontSize=void 0===_ref$labelFontSize?10:_ref$labelFontSize,_ref$labelFormatter=_ref.labelFormatter,labelFormatter=void 0===_ref$labelFormatter?formatTime:_ref$labelFormatter,_ref$startMargin=_ref.startMargin,startMargin=void 0===_ref$startMargin?0:_ref$startMargin,finalTickColor=null!=tickColor?tickColor:_constants.DEFAULT_TICK_COLOR,finalLabelColor=null!=labelColor?labelColor:_constants.DEFAULT_LABEL_COLOR,numTicks=Math.floor(duration/1e3/interval);if(width<=0||numTicks<=0)return null;var tickSpacing=(width-startMargin)/numTicks,labelInterval=Math.ceil(50/tickSpacing);return(0,_jsxRuntime.jsx)(_jsxRuntime.Fragment,{children:Array.from({length:numTicks+1}).map((function(_,i){var _font$measureText,xPosition=startMargin+i*(width-startMargin)/numTicks+paddingLeft,label=labelFormatter(i*interval),labelWidth=0;!_constants.isWeb&&font&&(labelWidth=(null==font||null==(_font$measureText=font.measureText(label))?void 0:_font$measureText.width)||0);var shouldDrawLabel=i%labelInterval==0,shouldDrawTick=shouldDrawLabel||tickSpacing>=50;return(0,_jsxRuntime.jsxs)(_react.default.Fragment,{children:[shouldDrawTick&&(0,_jsxRuntime.jsx)(_reactNativeSkia.Line,{p1:{x:xPosition,y:0},p2:{x:xPosition,y:tickHeight},color:finalTickColor,strokeWidth:1}),shouldDrawLabel&&font&&(0,_jsxRuntime.jsx)(_reactNativeSkia.Text,{text:label,x:xPosition-labelWidth/2,color:finalLabelColor,y:tickHeight+labelFontSize,font})]},i)}))})}).__docgenInfo={description:"",methods:[],displayName:"SkiaTimeRuler",props:{duration:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},font:{required:!1,tsType:{name:"SkFont"},description:""},paddingLeft:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},interval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},tickHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},tickColor:{required:!1,tsType:{name:"string"},description:""},labelColor:{required:!1,tsType:{name:"string"},description:""},labelFontSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},labelFormatter:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"",defaultValue:{value:"(seconds: number): string => {\n    const h = Math.floor(seconds / 3600)\n    const m = Math.floor((seconds % 3600) / 60)\n    const s = seconds % 60\n    if (h > 0) {\n        return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`\n    } else {\n        return `${m}:${s.toString().padStart(2, '0')}`\n    }\n}",computed:!1}},startMargin:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}}}}},"./src/Waveform/Waveform.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reactNativeSkia=__webpack_require__("./node_modules/@shopify/react-native-skia/lib/module/index.js"),_react=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("./node_modules/react/index.js")),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}var Waveform=function Waveform(_ref){var activePoints=_ref.activePoints,canvasHeight=_ref.canvasHeight,canvasWidth=_ref.canvasWidth,minAmplitude=_ref.minAmplitude,maxAmplitude=_ref.maxAmplitude,path=(0,_react.useMemo)((function(){if(0===activePoints.length)return"";var centerY=canvasHeight/2,totalPoints=activePoints.length,pathData=activePoints.map((function(_ref2,index){var amplitude=_ref2.amplitude;return{x:index/(totalPoints-1)*canvasWidth,y:centerY-(amplitude-minAmplitude)/(maxAmplitude-minAmplitude)*(canvasHeight/2)}}));if(!pathData[0])return"";var waveformPath=`M${pathData[0].x},${pathData[0].y}`;return pathData.slice(1).forEach((function(point){waveformPath+=` L${point.x},${point.y}`})),waveformPath}),[activePoints,canvasHeight,canvasWidth,minAmplitude,maxAmplitude]);return path?(0,_jsxRuntime.jsx)(_reactNativeSkia.Path,{path,color:"blue",style:"stroke",strokeWidth:2}):null};exports.default=Waveform;Waveform.__docgenInfo={description:"",methods:[],displayName:"Waveform",props:{activePoints:{required:!0,tsType:{name:"Array",elements:[{name:"CandleData"}],raw:"CandleData[]"},description:""},canvasHeight:{required:!0,tsType:{name:"number"},description:""},canvasWidth:{required:!0,tsType:{name:"number"},description:""},minAmplitude:{required:!0,tsType:{name:"number"},description:""},maxAmplitude:{required:!0,tsType:{name:"number"},description:""},theme:{required:!1,tsType:{name:"AudioVisualizerTheme"},description:""}}}},"./src/YAxis/YAxis.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.YAxis=void 0;var _reactNativeSkia=__webpack_require__("./node_modules/@shopify/react-native-skia/lib/module/index.js"),_react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_constants=__webpack_require__("./src/constants.tsx"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js"),formatLabel=function formatLabel(value){return value.toFixed(2)};(exports.YAxis=function YAxis(_ref){var canvasHeight=_ref.canvasHeight,minAmplitude=_ref.minAmplitude,maxAmplitude=_ref.maxAmplitude,padding=_ref.padding,_ref$tickInterval=_ref.tickInterval,tickInterval=void 0===_ref$tickInterval?.1:_ref$tickInterval,_ref$tickLength=_ref.tickLength,tickLength=void 0===_ref$tickLength?10:_ref$tickLength,font=_ref.font,tickColor=_ref.tickColor,labelColor=_ref.labelColor,_ref$labelFontSize=_ref.labelFontSize,labelFontSize=void 0===_ref$labelFontSize?10:_ref$labelFontSize,_ref$labelFormatter=_ref.labelFormatter,labelFormatter=void 0===_ref$labelFormatter?formatLabel:_ref$labelFormatter,finalTickColor=null!=tickColor?tickColor:_constants.DEFAULT_TICK_COLOR,finalLabelColor=null!=labelColor?labelColor:_constants.DEFAULT_LABEL_COLOR,numTicks=Math.floor((maxAmplitude-minAmplitude)/tickInterval),tickSpacing=(canvasHeight-2*padding)/numTicks;return canvasHeight<=0||numTicks<=0?null:(0,_jsxRuntime.jsx)(_jsxRuntime.Fragment,{children:Array.from({length:numTicks+1}).map((function(_,i){var yPosition=canvasHeight-padding-i*tickSpacing,label=labelFormatter(minAmplitude+i*tickInterval);return(0,_jsxRuntime.jsxs)(_react.default.Fragment,{children:[(0,_jsxRuntime.jsx)(_reactNativeSkia.Line,{p1:{x:padding,y:yPosition},p2:{x:padding+tickLength,y:yPosition},color:finalTickColor,strokeWidth:1}),font&&(0,_jsxRuntime.jsx)(_reactNativeSkia.Text,{text:label,x:padding+tickLength+5,color:finalLabelColor,y:yPosition+labelFontSize/2,font})]},i)}))})}).__docgenInfo={description:"",methods:[],displayName:"YAxis",props:{canvasHeight:{required:!0,tsType:{name:"number"},description:""},canvasWidth:{required:!0,tsType:{name:"number"},description:""},minAmplitude:{required:!0,tsType:{name:"number"},description:""},maxAmplitude:{required:!0,tsType:{name:"number"},description:""},padding:{required:!0,tsType:{name:"number"},description:""},algorithm:{required:!1,tsType:{name:"union",raw:"'peak' | 'rms'",elements:[{name:"literal",value:"'peak'"},{name:"literal",value:"'rms'"}]},description:""},font:{required:!1,tsType:{name:"SkFont"},description:""},tickInterval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.1",computed:!1}},tickLength:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},tickColor:{required:!1,tsType:{name:"string"},description:""},labelColor:{required:!1,tsType:{name:"string"},description:""},labelFontSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},labelFormatter:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"",defaultValue:{value:"(value: number): string => {\n    return value.toFixed(2)\n}",computed:!1}}}}},"./src/constants.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWeb=exports.defaultCandleColors=exports.DEFAULT_TICK_COLOR=exports.DEFAULT_LABEL_COLOR=exports.CANDLE_SELECTED_COLOR=exports.CANDLE_OFFCANVAS_COLOR=exports.CANDLE_ACTIVE_SPEECH_COLOR=exports.CANDLE_ACTIVE_AUDIO_COLOR=void 0;var _Platform=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/Platform/index.js")),CANDLE_ACTIVE_AUDIO_COLOR=(exports.isWeb="web"===_Platform.default.OS,exports.CANDLE_ACTIVE_AUDIO_COLOR="rgba(74, 144, 226, 1)"),CANDLE_ACTIVE_SPEECH_COLOR=exports.CANDLE_ACTIVE_SPEECH_COLOR="rgba(114, 191, 106, 1)",CANDLE_SELECTED_COLOR=exports.CANDLE_SELECTED_COLOR="rgba(255, 99, 71, 1)",CANDLE_OFFCANVAS_COLOR=exports.CANDLE_OFFCANVAS_COLOR="rgba(211, 211, 211, 1)";exports.DEFAULT_TICK_COLOR="white",exports.DEFAULT_LABEL_COLOR="white",exports.defaultCandleColors={activeAudioColor:CANDLE_ACTIVE_AUDIO_COLOR,activeSpeechColor:CANDLE_ACTIVE_SPEECH_COLOR,offcanvasColor:CANDLE_OFFCANVAS_COLOR,selectedColor:CANDLE_SELECTED_COLOR}}}]);